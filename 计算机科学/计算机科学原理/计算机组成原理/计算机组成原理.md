# 计算机组成原理

**老师：袁全清（17702724135）**

**课时：64学时**

## 计算机系统概论

- 计算机性能指标

  - 非时间指标
    - 【字长】机器一次能处理的二进制位数 ，常见的有32位或64位
    - 【总线宽度】数据总线一次能并行处理的最大信息位数，一般指运算器与存储器之间的数据总线的位数
    - 【主存容量】主存的大小
    - 【存储带宽】单位时间内与主存交换的二进制位数 B/s

  - 时间指标
    - 【主频f】时钟震荡的频率 Hz；【时钟周期T】时钟震荡一次的时间 t
    - 【外频】CPU与主板之间同步的时钟频率，系统总线的工作频率；【倍频】主频与外频的倍数 =主频/外频
    - 【CPI】clock cycles per instruction，执行一条指令需要的周期数（平均）
    - 【MIPS】million instructions per second，每秒执行的指令总条数 MIPS= f / CPI （忽略单位）

## 计算机发展史

- 冯诺依曼计算机

  - 主机（cpu+内存）
  - 外设（输入设备+输出设备+外存）
  - 总线（地址总线+数据总线+控制总线）

- 软件与硬件
  - 机器M0（微程序）
    - 构成机器M1的基本语句的程序
  - 机器M1
    - 无需编译，直接运行
  - 机器M2（操作系统）
    - 机器语言解释操作系统
  - 汇编（20世纪50年代）
    - $ \boxed{虚拟机器M2}\to\boxed{简单编译}\to\boxed{实际机器M1}$
    - 需要知道计算机内部构造
  - 高级语言（20世纪60年代）
    - $ \boxed{虚拟机器M3}\to\boxed{虚拟机器M2}\to\boxed{简单编译}\to\boxed{实际机器M1}$
    - **翻译语言：**源语言 > obj文件
    - **解释语言：**辅助程序运行语言，不存在完整编译
  - 虚拟机语言
    - python，Java…

## 系统总线

- 系统总线

  - CPU、主存、I/O各大部件之间的信息传输线
  - 运算器为中心

    - I/O与存储器的交流会占用运算器的运行
  - 存储器为中心

    - 难以调度
  - 总线
    - 同一时间单个设备发，N个设备接收相同信息
    - $ \boxed{CPU}\stackrel{M总线}{\leftrightarrow}\boxed{RAM}$
    - $ \boxed{CPU}\stackrel{I/O总线}{\leftrightarrow}\boxed{I/O}$​
  - 数据总线（DB，Data Bus）
    - 在任意两个涉及数据（此处的含义包括要运算的数据信息或要处理的指令信息）的存储、处理乃至交换、传输的设备之间，都应有数据总线。
    - 因为数据正是通过这条总线而实现传输的。显然，数据总线应该能实现**双向传输**，即可以进行从A设备向B设备的传送，也可以进行从B设备向A设备的传送。
  - 地址总线（AB，Address Bus）
    - 地址总线用于传送地址信号，以确定所访问的存储单元或某个输入/输出端口。微机中地址总线一般有16位、20位、24位、32位、36位等几种宽度标准，与存储器所用的地址的位数以及端口的地址位数相对应。这也同时确定了可以访问的存储空间的大小。
    - 应当指出，**地址总线要和数据总线一起使用才有效**。比如，如果要从某个设备向存储设备存入数据，则这个数据应该放到从某个设备连接到存储设备的数据总线上，同时应在连接这两个设备的地址总线上给出存储设备的地址，这样才能实现正确的存入（写入）操作。
    - 从这里也不难理解，地址总线是**单向总线**，而不像数据总线那样需要有双向传送的功能。只有掌握总线控制权的主控部件，如中央处理器、输入/输出处理机IOP（Input Output Processor）等，才能向地址总线上发送地址信息。而像存储器这样不掌握总线控制权的部件，只能从地址总线上接收地址信息，并配合控制信号进行地址译码就可以了。
  - 控制总线（CB,Control Bus）
    - **时钟：**同步各种操作
    - **复位：**初始化所有部件
    - **总线请求：**表示部件需要总线所有权
    - **总线允许：**允许获得总线占用的部件占用总线
    - **中断请求：**部件提出中断请求
    - **中断响应：**表示中断请求已被接受
    - **存储器写：**在存储器指定位置写入总线信息
    - **存储器读：**将存储器指定位置信息写入总线
    - **I/O读：**在指定I/O写入总线信息
    - **I/O写：**将指定I/O信息写入总线

- 片内总线

  - 片内总线是指芯片内部的总线

- 总线控制

  - 总线判优控制
    按照判优，仲裁逻辑解决总线分配使用

    - 集中式

      - **链式：**BS（总线忙），BR（总线请求），BG（总线同意）

        通过BR得到BG的设备在其他设备的数据流传达的时候会发出BS要求数据流目标撤回数据流

        容易扩展设备，对故障敏感，低优先级设备难以获得请求

      - **计算器定时查询：**比起链式多了一个设备地址线，少了BG

        占用需要等到计算器计数是设备编号的时候才可以BR，一旦计数器停止就发出BS

        对故障没有那么敏感（非菊花链实现控制），控制和扩展都更加麻烦了

    - **独立请求式：**每个设备一根控制线

      灵活控制，对故障不敏感，结构复杂
    
  - 总线通信控制

    - 申请分配阶段
    - 寻址阶段
    - 传输阶段
    - 结束阶段
    
  - 同步通信与非同步通信

    - 同步通信：

      劣势是周期设计必须以性能短板设备设计，拖慢了所有设备的运行效率

      - 读命令
        - **T~1~：**
        - **T~2~：**
        - **T~3~：**
        - **T~4~：**
      - 写命令
        - **T~1~：**
        - **T~2~：**
        - **T~3~：**
        - **T~4~：**

    - 异步通信

      采用**应答模式**，直到模块得到反馈才开始传输

      - **不互锁：**发出反馈就撤销信号
      - **半互锁：**发出反馈后等到回答信号（确认没有被占用）后撤销回答信号
      - **全互锁：**三次握手
      - $ \boxed{\dots\bigg |终止位}\ \boxed{起始位\bigg|空闲位\bigg|数据位（5-8位）\bigg|奇偶校验位\bigg|终止位}\ \boxed{起始位\bigg |\dots}$
      - **波特率：**异步传输速率单位，单位：位每秒（byte per second，bps）

    - 同步字符SYN

      在异步通信里用SYN同步后就可以继续同步通信了

    - 半同步通信

    - 分离通信

## 存储器

- 概述
  - 存储器分类
    - 按存储介质分类
      - **半导体存储器：**TTL类和MOS类
      - **磁表面存储器：**磁头读磁盘/磁带/磁鼓
      - **光盘：**激光读写磁光材料
    - 按存取方式分类
      - 随机存储器（Random Access Memory，RAM）
      - 只读存储器（Read Only Memory，ROM）
      - 串行访问存储器：读写与物理位置有关，包括磁带和磁盘
  - 存储器结构
  
- 随机存取存储器（RAM）

  - 静态RAM

    - 有电不丢失

  - 动态RAM

    - 有电时间长了也丢失

    - 为了不丢失需要刷新

      - 刷新必须一行行来

      - 刷新会定时进行，有**刷新周期**

      - 通常三种刷新方法：

        - 集中刷新

          定一个时间，停止读写，对全部存储单元刷新。刷新的时间称为*死时间*。

        - 分散刷新

          分区域刷新存储单元。刷新时间延迟，分散。

        - 异步刷新

          结合前两种方法，第一个时间内大块分散刷新，其他时间读写。

  - 动态RAM比静态RAM广泛的多
  
    - 动态集成度高
    - 动态的地址传输按序可靠
    - 动态功耗小
    - 动态价格便宜
  
  - 只读存储器
  
    - 掩模ROM
  
    - PROM
  
      用熔丝通路与断路存储
  
    - EPROM
  
      PN结之间的浮动栅
  
- 存储器的校验

  - 奇偶校验

    对偶数个错误无能为力，不知道错误的具体原因

  - 汉明编码

  - 循环冗余校验

## I/O系统



## 计算机运算方法

## 指令系统

## CPU结构与功能

## 控制单元功能

## 控制单元设计

